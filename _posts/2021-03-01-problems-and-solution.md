# problems and solutions

## 异常处理不当（偷偷吃掉/捕获粒度大/异常和返回混淆等）
解决方案：
1. 细粒度捕获控制异常
2. 下层服务不偷吃异常，一般由最上层决定是否忽略
3. 异常打印error日志

## 进程和线程并发安全考虑较少
解决方案：
对于分布式场景下多进程并发安全问题，一般采用两种解决方案，第一种采用分布式锁（Redis, Zookeeper, MySQL)实现多进程同步，第二种采用session保持策略将相同维度请求路由至同一线程，从而将进程并发问题降为线程并发同步问题。
线程安全问题，CAS，ThreadLocal等思想解决

## 配置变更MySQL+Redis一致性问题导致客户取不到最新配置
解决方案：
大致思路采用推拉结合策略，客户端与Redis版本超时未变时，直接查询MySQL获取最新数据，详细方案见：“管理态配置类数据（系统/业务/租户）变更同步客户端方案。

## 硬编码
解决方案：
1. Python使用的字典类型建议采用Class方式实现类似Java枚举值效果
2. 请求入参出参抽象为bean对象
3. 字符串&状态码抽取成有自带含义的常量，实现常量/变量自我解释。
